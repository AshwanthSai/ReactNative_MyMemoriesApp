{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport * as imagePicker from \"expo-image-picker\";\nimport { useFormikContext } from \"formik\";\nimport ValidationErrorMessage from \"./ValidationErrorMessage\";\nimport colors from \"../config/colors\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ImageInput(_ref) {\n  var name = _ref.name,\n      uri = _ref.uri,\n      setUri = _ref.setUri;\n\n  var _useFormikContext = useFormikContext(),\n      setFieldValue = _useFormikContext.setFieldValue,\n      errors = _useFormikContext.errors,\n      values = _useFormikContext.values,\n      touched = _useFormikContext.touched;\n\n  var handlePress = function handlePress() {\n    if (!uri) selectImage();else {\n      Alert.alert(\"Delete Image\", \"Do you want unselect the image?\", [{\n        text: \"yes\",\n        onPress: function onPress() {\n          setUri(null);\n          setFieldValue(name, null);\n        }\n      }, {\n        text: \"No\"\n      }]);\n    }\n  };\n\n  var selectImage = function _callee() {\n    var result;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(imagePicker.launchImageLibraryAsync({\n              mediaTypes: imagePicker.MediaTypeOptions.Images,\n              quality: 0.5,\n              allowsEditing: true\n            }));\n\n          case 3:\n            result = _context.sent;\n\n            if (!result.cancelled) {\n              setUri(result.uri);\n              setFieldValue(name, {\n                uri: result.uri,\n                type: result.type\n              });\n            }\n\n            console.log(result);\n            result;\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"unable to select image\", _context.t0);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return _jsxs(_Fragment, {\n    children: [_jsx(TouchableWithoutFeedback, {\n      onPress: handlePress,\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [!uri && _jsx(MaterialCommunityIcons, {\n          name: \"camera\",\n          size: 50,\n          color: colors.medium\n        }), uri && _jsx(Image, {\n          style: styles.image,\n          source: {\n            uri: uri\n          }\n        })]\n      })\n    }), _jsx(ValidationErrorMessage, {\n      error: errors[name],\n      visible: touched[name]\n    })]\n  });\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    backgroundColor: colors.white,\n    height: 100,\n    width: 100,\n    borderRadius: 15,\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n    borderWidth: 1,\n    borderColor: colors.primary\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\nexport default ImageInput;","map":{"version":3,"names":["React","useEffect","useState","MaterialCommunityIcons","imagePicker","useFormikContext","ValidationErrorMessage","colors","ImageInput","name","uri","setUri","setFieldValue","errors","values","touched","handlePress","selectImage","Alert","alert","text","onPress","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","quality","allowsEditing","result","cancelled","type","console","log","styles","container","medium","image","StyleSheet","create","alignItems","backgroundColor","white","height","width","borderRadius","justifyContent","overflow","borderWidth","borderColor","primary"],"sources":["C:/Users/tonyj/Desktop/Mobile App/MyMemories/src/Components/ImageInput.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Image,\n  TouchableWithoutFeedback,\n  Alert,\n} from \"react-native\";\n\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport * as imagePicker from \"expo-image-picker\";\n\nimport { useFormikContext } from \"formik\";\nimport ValidationErrorMessage from \"./ValidationErrorMessage\";\nimport colors from \"../config/colors\";\n\nfunction ImageInput({ name, uri, setUri }) {\n\n  const { setFieldValue, errors, values, touched } = useFormikContext();\n\n  const handlePress = () => {\n    if (!uri) selectImage();\n    else {\n      Alert.alert(\"Delete Image\", \"Do you want unselect the image?\", [\n        {\n          text: \"yes\",\n          onPress: () => {\n            // onChangeImage(null);\n            setUri(null);\n            setFieldValue(name, null);\n          },\n        },\n        {\n          text: \"No\",\n        },\n      ]);\n    }\n  };\n\n  const selectImage = async () => {\n    try {\n      const result = await imagePicker.launchImageLibraryAsync({\n        mediaTypes: imagePicker.MediaTypeOptions.Images,\n        quality: 0.5,\n        allowsEditing: true,\n        // base64: true,\n        // allowsEditing: true,\n      });\n      if (!result.cancelled) {\n        // onChangeImage(result.uri);\n        setUri(result.uri);\n        setFieldValue(name, {\n          uri: result.uri,\n          type: result.type,\n        });\n      }\n      console.log(result);\n      result;\n    } catch (error) {\n      console.log(\"unable to select image\", error);\n    }\n  };\n\n  return (\n    <>\n      <TouchableWithoutFeedback onPress={handlePress}>\n        <View style={styles.container}>\n          {!uri && (\n            <MaterialCommunityIcons\n              name=\"camera\"\n              size={50}\n              color={colors.medium}\n            />\n          )}\n\n          {uri && <Image style={styles.image} source={{ uri }} />}\n        </View>\n      </TouchableWithoutFeedback>\n      <ValidationErrorMessage error={errors[name]} visible={touched[name]} />\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    backgroundColor: colors.white,\n    height: 100,\n    width: 100,\n    borderRadius: 15,\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n    borderWidth: 1,\n    borderColor: colors.primary,\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n});\n\nexport default ImageInput;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;;;;AASA,SAASC,sBAAT,QAAuC,oBAAvC;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AAEA,SAASC,gBAAT,QAAiC,QAAjC;AACA,OAAOC,sBAAP;AACA,OAAOC,MAAP;;;;;AAEA,SAASC,UAAT,OAA2C;EAAA,IAArBC,IAAqB,QAArBA,IAAqB;EAAA,IAAfC,GAAe,QAAfA,GAAe;EAAA,IAAVC,MAAU,QAAVA,MAAU;;EAEzC,wBAAmDN,gBAAgB,EAAnE;EAAA,IAAQO,aAAR,qBAAQA,aAAR;EAAA,IAAuBC,MAAvB,qBAAuBA,MAAvB;EAAA,IAA+BC,MAA/B,qBAA+BA,MAA/B;EAAA,IAAuCC,OAAvC,qBAAuCA,OAAvC;;EAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;IACxB,IAAI,CAACN,GAAL,EAAUO,WAAW,GAArB,KACK;MACHC,KAAK,CAACC,KAAN,CAAY,cAAZ,EAA4B,iCAA5B,EAA+D,CAC7D;QACEC,IAAI,EAAE,KADR;QAEEC,OAAO,EAAE,mBAAM;UAEbV,MAAM,CAAC,IAAD,CAAN;UACAC,aAAa,CAACH,IAAD,EAAO,IAAP,CAAb;QACD;MANH,CAD6D,EAS7D;QACEW,IAAI,EAAE;MADR,CAT6D,CAA/D;IAaD;EACF,CAjBD;;EAmBA,IAAMH,WAAW,GAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,iCAEKb,WAAW,CAACkB,uBAAZ,CAAoC;cACvDC,UAAU,EAAEnB,WAAW,CAACoB,gBAAZ,CAA6BC,MADc;cAEvDC,OAAO,EAAE,GAF8C;cAGvDC,aAAa,EAAE;YAHwC,CAApC,CAFL;;UAAA;YAEVC,MAFU;;YAShB,IAAI,CAACA,MAAM,CAACC,SAAZ,EAAuB;cAErBlB,MAAM,CAACiB,MAAM,CAAClB,GAAR,CAAN;cACAE,aAAa,CAACH,IAAD,EAAO;gBAClBC,GAAG,EAAEkB,MAAM,CAAClB,GADM;gBAElBoB,IAAI,EAAEF,MAAM,CAACE;cAFK,CAAP,CAAb;YAID;;YACDC,OAAO,CAACC,GAAR,CAAYJ,MAAZ;YACAA,MAAM;YAlBU;YAAA;;UAAA;YAAA;YAAA;YAoBhBG,OAAO,CAACC,GAAR,CAAY,wBAAZ;;UApBgB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAApB;;EAwBA,OACE;IAAA,WACE,KAAC,wBAAD;MAA0B,OAAO,EAAEhB,WAAnC;MAAA,UACE,MAAC,IAAD;QAAM,KAAK,EAAEiB,MAAM,CAACC,SAApB;QAAA,WACG,CAACxB,GAAD,IACC,KAAC,sBAAD;UACE,IAAI,EAAC,QADP;UAEE,IAAI,EAAE,EAFR;UAGE,KAAK,EAAEH,MAAM,CAAC4B;QAHhB,EAFJ,EASGzB,GAAG,IAAI,KAAC,KAAD;UAAO,KAAK,EAAEuB,MAAM,CAACG,KAArB;UAA4B,MAAM,EAAE;YAAE1B,GAAG,EAAHA;UAAF;QAApC,EATV;MAAA;IADF,EADF,EAcE,KAAC,sBAAD;MAAwB,KAAK,EAAEG,MAAM,CAACJ,IAAD,CAArC;MAA6C,OAAO,EAAEM,OAAO,CAACN,IAAD;IAA7D,EAdF;EAAA,EADF;AAkBD;;AAED,IAAMwB,MAAM,GAAGI,UAAU,CAACC,MAAX,CAAkB;EAC/BJ,SAAS,EAAE;IACTK,UAAU,EAAE,QADH;IAETC,eAAe,EAAEjC,MAAM,CAACkC,KAFf;IAGTC,MAAM,EAAE,GAHC;IAITC,KAAK,EAAE,GAJE;IAKTC,YAAY,EAAE,EALL;IAMTC,cAAc,EAAE,QANP;IAOTC,QAAQ,EAAE,QAPD;IAQTC,WAAW,EAAE,CARJ;IASTC,WAAW,EAAEzC,MAAM,CAAC0C;EATX,CADoB;EAY/Bb,KAAK,EAAE;IACLO,KAAK,EAAE,MADF;IAELD,MAAM,EAAE;EAFH;AAZwB,CAAlB,CAAf;AAkBA,eAAelC,UAAf"},"metadata":{},"sourceType":"module"}